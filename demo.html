<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
	</head>
	<body>
<script type="module">
window.addEventListener("error", e => console.warn(e));
window.addEventListener("unhandledrejection ", e => console.warn(e));

import { Scene, Glyphs } from "./js/fastiles.js";


async function init() {

	const glyphs = new Glyphs({ tileSize: 12, fontSize: 14 });

	let tileCount = [50, 38];
	let s = new Scene({
		tileSize: [12, 12],
		tileCount,
		glyphs: glyphs.node,
	});

	document.body.appendChild(s.node);

	window.s = s;
	window.Scene = Scene;

	function rnd(n) { return Math.floor(Math.random() * n); }

	let count = 0;
	function draw() {
		let i, j;
		for (j=0;j<tileCount[1];j++) {
			for (i=0;i<tileCount[0];i++) {
				s.draw(i, j, rnd(256), rnd(4096), 0);
			}
		}
	}
	
	draw();
	setInterval(draw, 200);
}

init();
</script>
	</body>
</html>
